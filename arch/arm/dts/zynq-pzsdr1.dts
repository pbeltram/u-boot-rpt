/*
 * Analog Devices Inc. Pluto SDR board DTS
 *
 * Copyright (C) 2015-2018 Analog Devices Inc.
 *
 * SPDX-License-Identifier:  GPL-2.0+
 */
/dts-v1/;
#include "zynq-7000.dtsi"

/ {
  model = "Zynq Picozed SDR Board";
  compatible = "xlnx,zynq-7000";

  aliases {
    ethernet0 = &gem0;
    i2c0 = &i2c0;
    serial0 = &uart1;
    spi0 = &qspi;
    mmc0 = &sdhci0;
  };

  memory@0 {
    device_type = "memory";
    reg = <0x0 0x40000000>;
  };

  chosen {
    bootargs = "";
    stdout-path = "serial0:115200n8";
  };

  usb_phy0: phy0@e0002000 {
    compatible = "ulpi-phy";
    #phy-cells = <0>;
    reg = <0xe0002000 0x1000>;
    view-port = <0x0170>;
    drv-vbus;
  };
};

&clkc {
  ps-clk-frequency = <33333333>;
};

&gem0 {
  status = "disabled"; /* "okay" to enable */
  phy-mode = "rgmii-id";
  phy-handle = <&ethernet_phy>;

  phy-reset-gpios = <&gpio0 8 0>;
  phy-reset-active-low;

  ethernet_phy: ethernet-phy@0 {
    reg = <0>;
    device_type = "ethernet-phy";
  };
};

&i2c0 {
  status = "okay";
  clock-frequency = <400000>;
  #address-cells = <1>;
  #size-cells = <0>;

  eeprom@50 {
    compatible = "atmel,24c32";
    reg = <0x50>;
  };

};

&qspi {
  u-boot,dm-pre-reloc;
  status = "okay";
  is-dual = <0>;
  num-cs = <1>;
  flash@0 {
    compatible = "n25q256a11", "jedec,spi-nor";
    reg = <0x0>;
    spi-tx-bus-width = <1>;
    spi-rx-bus-width = <4>;
    spi-max-frequency = <50000000>;
    #address-cells = <1>;
    #size-cells = <1>;
    
    partition@qspi-fsbl-uboot {
      label = "qspi-fsbl-uboot";
      reg = <0x0 0x100000>; /* 1M */
    };
    partition@qspi-uboot-env {
      label = "qspi-uboot-env";
      reg = <0x100000 0x20000>; /* 128k */
    };
    partition@qspi-nvmfs {
      label = "qspi-nvmfs";
      reg = <0x120000 0xE0000>; /* 1M */
    };
    partition@qspi-linux {
      label = "qspi-linux";
      reg = <0x200000 0x1E00000>; /* 30M */
    };
  };
};

&sdhci0 {
  u-boot,dm-pre-reloc;
  status = "okay";
};

&uart1 {
  u-boot,dm-pre-reloc;
  status = "okay";
};

&usb0 {
  status = "okay";
  dr_mode = "host";
  usb-phy = <&usb_phy0>;
};

&watchdog0 {
  reset-on-timeout;
};
